# üåê –°—á—ë—Ç—á–∏–∫ –∏–º–ø—É–ª—å—Å–æ–≤ –Ω–∞ –±–∞–∑–µ Tuya

Wi-Fi —Å—á—ë—Ç—á–∏–∫ –∏–º–ø—É–ª—å—Å–æ–≤ –¥–ª—è –¥–≤—É—Ö —Å—á—ë—Ç—á–∏–∫–æ–≤ **Valtek VLF-R** —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –≤ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É Tuya IoT. –ü—Ä–æ–µ–∫—Ç —Å—á–∏—Ç—ã–≤–∞–µ—Ç –∏–º–ø—É–ª—å—Å—ã —Å –¥–≤—É—Ö –≤—Ö–æ–¥–æ–≤, –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –∏ –æ—Ç—Å—ã–ª–∞–µ—Ç –∏—Ö –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥ –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É Tuya. –§–∏–∑–∏—á–µ—Å–∫–∞—è –∫–Ω–æ–ø–∫–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å –º–æ–¥—É–ª—å Wi-Fi.

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```plaintext
tuya-pulse-counter/
‚îú‚îÄ‚îÄ schetchik.ino       # –û—Å–Ω–æ–≤–Ω–æ–π —Å–∫–µ—Ç—á Arduino
‚îú‚îÄ‚îÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è.docx     # –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Å–±–æ—Ä–∫–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
‚îî‚îÄ‚îÄ README.md           # –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞ –∏ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ
```

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* üî¢ –ü–æ–¥—Å—á—ë—Ç –∏–º–ø—É–ª—å—Å–æ–≤ —Å –¥–≤—É—Ö Valtek VLF-R —Å—á—ë—Ç—á–∏–∫–æ–≤.
* ‚è±Ô∏è –û—Ç–ø—Ä–∞–≤–∫–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π (`count * 100`) –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—É Tuya –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥.
* üîÑ –°–±—Ä–æ—Å Wi-Fi –º–æ–¥—É–ª—è –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏.
* ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏ –≤–µ—Ä—Å–∏–∏ –ø—Ä–æ—à–∏–≤–∫–∏.

---

## üõ† –ê–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ

1. **MCU**: –ø–ª–∞—Ç–∞ –Ω–∞ –±–∞–∑–µ ESP8266 (NodeMCU, Wemos D1 Mini –∏ —Ç.–ø.)
2. **–°—á—ë—Ç—á–∏–∫–∏ Valtek VLF-R**:

   * –°—á—ë—Ç—á–∏–∫¬†1 ‚Üí `D1` (`SENSOR1_PIN`)
   * –°—á—ë—Ç—á–∏–∫¬†2 ‚Üí `D2` (`SENSOR2_PIN`)
3. **–ö–Ω–æ–ø–∫–∞ —Å–±—Ä–æ—Å–∞**:

   * –ú–µ–∂–¥—É `D3` (`RESET_PIN`) –∏ GND
   * –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `INPUT_PULLUP`, –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –ø–∏–Ω –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç—Å—è –∫ LOW
4. **–ü–∏—Ç–∞–Ω–∏–µ**: 5‚ÄØV —á–µ—Ä–µ–∑ USB

---

## üíª –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ

* Arduino¬†IDE (>=¬†1.8.13)
* –ü–ª–∞—Ç–∞ ESP8266 —á–µ—Ä–µ–∑ Board Manager
* –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ [TuyaWifi](https://github.com/tuya/tuya-wifi-arduino)

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

<details>
<summary>1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π</summary>

```bash
git clone https://github.com/rembov/tuya-pulse-counter.git
```

</details>

<details>
<summary>2. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –≤ Arduino IDE</summary>

* –§–∞–π–ª: `schetchik.ino`
* Sketch ‚Üí Include Library ‚Üí Manage Libraries‚Ä¶
* –ü–æ–∏—Å–∫: `TuyaWifi` ‚Üí –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å

</details>

<details>
<summary>3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–¥–∞</summary>

–í `schetchik.ino` –∑–∞–º–µ–Ω–∏—Ç–µ:

```cpp
unsigned char pid[]     = "<–í–ê–®_PID_–£–°–¢–†–û–ô–°–¢–í–ê>";
unsigned char mcu_ver[] = "1.0.0";
```

–¢–∞–∫–∂–µ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–π—Ç–µ –ø–∏–Ω—ã:

```cpp
#define SENSOR1_PIN  D1
#define SENSOR2_PIN  D2
#define RESET_PIN    D3
#define DP_ID_1      1  // DP ID –ø–µ—Ä–≤–æ–≥–æ —Å—á—ë—Ç—á–∏–∫–∞
#define DP_ID_2      2  // DP ID –≤—Ç–æ—Ä–æ–≥–æ —Å—á—ë—Ç—á–∏–∫–∞
```

</details>

---

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å–∫–µ—Ç—á –Ω–∞ –ø–ª–∞—Ç—É ESP8266.
2. –û—Ç–∫—Ä–æ–π—Ç–µ **Serial Monitor** (115200 baud) –¥–ª—è –ª–æ–≥–æ–≤.
3. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É —Å–±—Ä–æ—Å–∞ –¥–ª—è –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Wi-Fi.
4. –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ Tuya IoT.

---

## üìÑ –û–ø–∏—Å–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

| –§–∞–π–ª              | –û–ø–∏—Å–∞–Ω–∏–µ                                                       |
| ----------------- | -------------------------------------------------------------- |
| `schetchik.ino`   | –ö–æ–¥ –¥–ª—è –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π, –ø–æ–¥—Å—á—ë—Ç–∞ –∏–º–ø—É–ª—å—Å–æ–≤ –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å Tuya |
| `–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è.docx` | –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—é –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –Ω–∞ —Ä—É—Å—Å–∫–æ–º     |

---

